// 1. Get references to the elements
const textarea = document.getElementById('myTextarea');
const liveOutput = document.getElementById('liveOutput');

// 2. Attach the 'input' event listener
textarea.addEventListener('input', function() {
    // 3. Get the live value using .value
    const currentValue = textarea.value;

    // 4. Update the display element
    liveOutput.textContent = currentValue;
    
    // NOTE: If you were updating another element's innerHTML (like a <div>)
    // to render the user's input as HTML, you would use:
    // someDiv.innerHTML = currentValue;
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live JavaScript Sandbox</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Set the Inter font globally */
        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
        /* Style the textarea to look like a code editor */
        #codeInput {
            resize: none;
            tab-size: 4;
            /* Customize scrollbar appearance for the editor */
            scrollbar-color: #4b5563 #1f2937; /* thumb and track colors */
            scrollbar-width: thin;
        }
        /* Style for the console output area */
        .console-output {
            max-height: 300px;
            overflow-y: auto;
            border-radius: 0.75rem;
            padding: 1rem;
        }
        .console-line {
            font-family: 'Consolas', 'Monospace', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .console-info { color: #9ca3af; }
        .console-log { color: #f9fafb; }
        .console-error { color: #f87171; font-weight: bold; }
    </style>
</head>
<body class="bg-gray-900 text-white p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl font-extrabold mb-6 text-emerald-400">
            Live JavaScript Sandbox
        </h1>
        <p class="text-gray-400 mb-6">
            Enter your JavaScript code below. The output will be displayed in the Custom Console.
        </p>

        <!-- Main Grid Layout: Editor and Custom Console -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Code Editor Panel -->
            <div class="flex flex-col h-[400px]">
                <h2 class="text-xl font-semibold mb-3 text-gray-200">
                    <span class="text-emerald-300">1.</span> Enter JavaScript Code
                </h2>
                <textarea 
                    id="codeInput" 
                    class="flex-grow p-4 bg-gray-800 border border-gray-700 rounded-xl focus:ring-2 focus:ring-emerald-500 text-sm" 
                    placeholder="/* Start typing your JavaScript here */

// Example: Function to calculate factorial
function factorial(n) {
    if (n === 0) return 1;
    return n * factorial(n - 1);
}

console.log('Factorial of 5 is:', factorial(5));

// Example: Handling an error
try {
    throw new Error('Something went wrong!');
} catch (e) {
    console.error('Caught error:', e.message);
}
"
                ></textarea>
                <div class="mt-4 flex space-x-4">
                    <button onclick="runCode()" class="px-6 py-2 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl shadow-lg transition duration-200">
                        Run Code
                    </button>
                    <button onclick="clearConsole()" class="px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-xl transition duration-200">
                        Clear Console
                    </button>
                </div>
            </div>

            <!-- Custom Console Output Panel -->
            <div class="flex flex-col">
                <h2 class="text-xl font-semibold mb-3 text-gray-200">
                    <span class="text-emerald-300">2.</span> Custom Console Output
                </h2>
                <div id="consoleOutput" class="console-output bg-gray-800 border border-gray-700">
                    <div class="console-line console-info">Awaiting code execution...</div>
                </div>
            </div>

        </div>

        <!-- Hidden Iframe for Sandboxing -->
        <!-- We keep the iframe hidden to execute the JS securely without visual distractions -->
        <iframe id="sandboxFrame" style="display: none;" sandbox="allow-scripts" title="JS Sandbox"></iframe>
    </div>

    <script>
        const codeInput = document.getElementById('codeInput');
        const consoleOutput = document.getElementById('consoleOutput');
        const sandboxFrame = document.getElementById('sandboxFrame');
        
        // This is necessary to initialize the iframe environment
        let sandboxWindow = sandboxFrame.contentWindow;

        /**
         * Clears the custom console output area.
         */
        function clearConsole() {
            consoleOutput.innerHTML = '<div class="console-line console-info">Console cleared.</div>';
        }

        /**
         * Appends a log message to the custom console display.
         * @param {string[]} args - Arguments passed to the log function.
         * @param {string} type - The type of log ('log', 'error', 'info').
         */
        function customLog(args, type) {
            // Convert all arguments to strings, handling objects gracefully
            const message = args.map(arg => {
                if (typeof arg === 'object' && arg !== null) {
                    try {
                        return JSON.stringify(arg, null, 2);
                    } catch {
                        return arg.toString();
                    }
                }
                return String(arg);
            }).join(' ');

            const line = document.createElement('div');
            line.className = 'console-line ' + (type === 'error' ? 'console-error' : 'console-log');
            line.textContent = `> ${message}`;
            
            consoleOutput.appendChild(line);
            // Auto-scroll to the bottom
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }

        /**
         * Runs the JavaScript code inside the hidden, sandboxed iframe.
         */
        function runCode() {
            const code = codeInput.value;
            
            // 1. Reset the console for the new run
            clearConsole();

            // 2. Prepare the sandbox iframe environment
            sandboxWindow = sandboxFrame.contentWindow;

            // 3. Inject a script to override console methods and execute the user's code
            const scriptContent = `
                // Overwrite console methods to relay output back to the parent page
                window.parentConsole = {
                    log: (...args) => window.parent.customLog(args, 'log'),
                    error: (...args) => window.parent.customLog(args, 'error'),
                    info: (...args) => window.parent.customLog(args, 'info'),
                };
                
                // Assign the custom console to the window's console object
                console.log = window.parentConsole.log;
                console.error = window.parentConsole.error;
                console.info = window.parentConsole.info;

                try {
                    // Execute the user's code
                    ${code}
                } catch (e) {
                    // Catch runtime errors and log them to the console
                    console.error('RUNTIME ERROR:', e.message);
                }
            `;
            
            // Create a temporary script element to inject the code
            const scriptEl = document.createElement('script');
            scriptEl.textContent = scriptContent;

            // Clear the iframe content first
            sandboxWindow.document.open();
            sandboxWindow.document.write(''); // Clear the document
            sandboxWindow.document.close();

            // Append the script to execute the code
            // We use setTimeout to ensure the document is fully ready before execution
            setTimeout(() => {
                try {
                    sandboxWindow.document.head.appendChild(scriptEl);
                } catch (e) {
                    customLog(['FATAL ERROR during injection:', e.message], 'error');
                }
            }, 10); 
        }

        // Add the customLog function to the global scope so the sandbox can call it
        window.customLog = customLog;

        // Automatically run the code when the page loads to show the example output
        window.onload = runCode;
    </script>

</body>
</html>